
var should = require('should');
var sinon = require('sinon');
var express = require('express');
var exphbs = require('express-handlebars');
var mongoose = require('mongoose');

app = express();
app.engine('hbs',exphbs({
	defaultLayout:'main'
}));
app.set('view engine','hbs');
app.set('views',__dirname+'/../views');


var passengerController = require('../controllers/passengerController')();

var User = require('../models/userModel');
var Matches = require('../models/matchesModel');

var UserObj1 = {
	"_id":1,
	"username":"venu",
	"email":"titaniumstudio0+v1@gmail.com",
	"phonenumber":"8142322179",
	"password":"test9290",
	"image_url":"sample.jpg"
}

var UserObj2 = {
	"_id":2,
	"username":"test 2",
	"email":"titaniumstudio0+v2@gmail.com",
	"phonenumber":"9542750395",
	"password":"test9291",
	"image_url":"testsample.jpg"
}

var user1 = new User(UserObj1);
var user2 = new User(UserObj2);

var tripid;

var db;

// find near taxies

 /*
 {coordinates: [78.46109000000001, 17.44433]}
 */


/*// save search data

{"startLocation":{"location":{"type":"Point","coordinates":[78.46109000000001,17.44433]},
"full_address":"1-10-74, Begumpet Rd, Old Patigadda, Chikoti Gardens, Begumpet, Hyderabad, Telangana 500016, India"},
"endLocation":{"location":{"type":"Point","coordinates":[78.43966820000003,17.4733375]},
"full_address":"Kukatpally Industrial Estate, Balanagar, Hyderabad, Telangana, India"},
"timeToLeave":"2015-09-18T10:15:18+00:00",
"user_id":"b9a71512-35fc-49ba-99a0-d7a1c662b387",
"directionsResult":[{"bounds":{"Qa":{"J":17.43992,"j":17.47334},"Ma":{"j":78.43638,"J":78.46313}},
                    "copyrights":"Map data Â©2015 Google","legs":[{"distance":{"text":"6.2 km","value":6216},
                    "duration":{"text":"19 mins","value":1149},
                    "end_address":"Kukatpally Industrial Estate, Balanagar, Hyderabad, Telangana, India",
                    "end_location":{"J":17.4728573,"M":78.4383355},
                    "start_address":"1-10-74/1, Begumpet Rd, Old Patigadda, Chikoti Gardens, Begumpet, Hyderabad, Telangana 500016, India","start_location":{"J":17.4446511,"M":78.46312910000006},"steps":[{"distance":{"text":"0.6 km","value":620},"duration":{"text":"1 min","value":64},"end_location":{"J":17.44179,"M":78.45821869999997},"polyline":{"points":"adniBqy{}MHh@r@fDBR\\zAX|@f@r@FJHJFLDHXf@BBb@t@FJx@lA^j@HJ@BlDdFZR"},"start_location":{"J":17.4446511,"M":78.46312910000006},"travel_mode":"DRIVING","encoded_lat_lngs":"adniBqy{}MHh@r@fDBR\\zAX|@f@r@FJHJFLDHXf@BBb@t@FJx@lA^j@HJ@BlDdFZR","path":[{"J":17.444650000000003,"M":78.46313},{"J":17.4446,"M":78.46292000000001},{"J":17.44434,"M":78.46208},{"J":17.44432,"M":78.46198000000001},{"J":17.44417,"M":78.46152000000001},{"J":17.44404,"M":78.46121000000001},{"J":17.44384,"M":78.46095000000001},{"J":17.443800000000003,"M":78.46089},{"J":17.44375,"M":78.46083},{"J":17.443710000000003,"M":78.46076000000001},{"J":17.44368,"M":78.46071},{"J":17.443550000000002,"M":78.46051000000001},{"J":17.443530000000003,"M":78.46049000000001},{"J":17.443350000000002,"M":78.46022},{"J":17.44331,"M":78.46016},{"J":17.44302,"M":78.45977},{"J":17.442860000000003,"M":78.45955000000001},{"J":17.44281,"M":78.45949},{"J":17.442800000000002,"M":78.45947000000001},{"J":17.441930000000003,"M":78.45832},{"J":17.44179,"M":78.45822000000001}],"lat_lngs":[{"J":17.444650000000003,"M":78.46313},{"J":17.4446,"M":78.46292000000001},{"J":17.44434,"M":78.46208},{"J":17.44432,"M":78.46198000000001},{"J":17.44417,"M":78.46152000000001},{"J":17.44404,"M":78.46121000000001},{"J":17.44384,"M":78.46095000000001},{"J":17.443800000000003,"M":78.46089},{"J":17.44375,"M":78.46083},{"J":17.443710000000003,"M":78.46076000000001},{"J":17.44368,"M":78.46071},{"J":17.443550000000002,"M":78.46051000000001},{"J":17.443530000000003,"M":78.46049000000001},{"J":17.443350000000002,"M":78.46022},{"J":17.44331,"M":78.46016},{"J":17.44302,"M":78.45977},{"J":17.442860000000003,"M":78.45955000000001},{"J":17.44281,"M":78.45949},{"J":17.442800000000002,"M":78.45947000000001},{"J":17.441930000000003,"M":78.45832},{"J":17.44179,"M":78.45822000000001}],
                    "instructions":"Head <b>west</b> on <b>Begumpet Rd/Inner Ring Rd</b> toward <b>Mayuri Marg</b><div style=\"font-size:0.9em\">Pass by Begumpet Petrol Pump (on the right)</div>","maneuver":"",
                    "start_point":{"J":17.4446511,"M":78.46312910000006},
                    "end_point":{"J":17.44179,"M":78.45821869999997}},
                    {"distance":{"text":"0.2 km","value":205},
                    "duration":{"text":"1 min","value":52},
                    "end_location":{"J":17.4399984,"M":78.45776019999994},
                    "polyline":{"points":"ermiB{zz}ML@JDTFj@LjBZvARn@HTB"},
                    "start_location":{"J":17.44179,"M":78.45821869999997},
                    "travel_mode":"DRIVING","encoded_lat_lngs":"ermiB{zz}ML@JDTFj@LjBZvARn@HTB",
                    "path":[{"J":17.44179,"M":78.45822000000001},{"J":17.44172,"M":78.45821000000001},{"J":17.441660000000002,"M":78.45818000000001},{"J":17.441550000000003,"M":78.45814},{"J":17.44133,"M":78.45807},{"J":17.44079,"M":78.45793},{"J":17.440350000000002,"M":78.45783},{"J":17.44011,"M":78.45778},{"J":17.44,"M":78.45776000000001}],"lat_lngs":[{"J":17.44179,"M":78.45822000000001},{"J":17.44172,"M":78.45821000000001},{"J":17.441660000000002,"M":78.45818000000001},{"J":17.441550000000003,"M":78.45814},{"J":17.44133,"M":78.45807},{"J":17.44079,"M":78.45793},{"J":17.440350000000002,"M":78.45783},{"J":17.44011,"M":78.45778},{"J":17.44,"M":78.45776000000001}],"instructions":"Take the ramp to <b>Begumpet-Brahmanvadi Rd</b>","maneuver":"","start_point":{"J":17.44179,"M":78.45821869999997},"end_point":{"J":17.4399984,"M":78.45776019999994}},{"distance":{"text":"9 m","value":9},"duration":{"text":"1 min","value":4},"end_location":{"J":17.4399213,"M":78.45773510000004},"polyline":{"points":"_gmiB_xz}MNB"},"start_location":{"J":17.4399984,"M":78.45776019999994},
                    "travel_mode":"DRIVING","encoded_lat_lngs":"_gmiB_xz}MNB","path":[{"J":17.44,"M":78.45776000000001},{"J":17.43992,"M":78.45774}],"lat_lngs":[{"J":17.44,"M":78.45776000000001},{"J":17.43992,"M":78.45774}],"instructions":"Continue onto <b>Begumpet-Brahmanvadi Rd</b>","maneuver":"","start_point":{"J":17.4399984,"M":78.45776019999994},"end_point":{"J":17.4399213,"M":78.45773510000004}},{"distance":{"text":"1.5 km","value":1491},"duration":{"text":"3 mins","value":191},"end_location":{"J":17.4489633,"M":78.44989959999998},"maneuver":"turn-right","polyline":{"points":"ofmiB{wz}MO^O\\WXYVWPWL_@JYFe@JMBSLEHEDERG\\QhA[dBKp@Iz@GbACVCTGRGNKJKHMJKD]NqA`@m@PiBp@[L_D~@oA^o@RWF}Bx@{Cx@s@PC@oATw@H{@Bu@C_AGa@EC?C?A@A@C?A@ABA@ADABCZ?HAJAFCVETA\\UpDMvA"},"start_location":{"J":17.4399213,"M":78.45773510000004},"travel_mode":"DRIVING","encoded_lat_lngs":"ofmiB{wz}MO^O\\WXYVWPWL_@JYFe@JMBSLEHEDERG\\QhA[dBKp@Iz@GbACVCTGRGNKJKHMJKD]NqA`@m@PiBp@[L_D~@oA^o@RWF}Bx@{Cx@s@PC@oATw@H{@Bu@C_AGa@EC?C?A@A@C?A@ABA@ADABCZ?HAJAFCVETA\\UpDMvA","path":[{"J":17.43992,"M":78.45774},{"J":17.44,"M":78.45758000000001},{"J":17.440080000000002,"M":78.45743},{"J":17.4402,"M":78.4573},{"J":17.440330000000003,"M":78.45718000000001},{"J":17.440450000000002,"M":78.45709000000001},{"J":17.44057,"M":78.45702},{"J":17.440730000000002,"M":78.45696000000001},{"J":17.44086,"M":78.45692000000001},{"J":17.44105,"M":78.45686},{"J":17.44112,"M":78.45684},{"J":17.44122,"M":78.45677},{"J":17.44125,"M":78.45672},{"J":17.441280000000003,"M":78.45669000000001},{"J":17.44131,"M":78.45659},{"J":17.44135,"M":78.45644},{"J":17.44144,"M":78.45607000000001},{"J":17.441580000000002,"M":78.45556},{"J":17.441640000000003,"M":78.45531000000001},{"J":17.44169,"M":78.45501},{"J":17.44173,"M":78.45467000000001},{"J":17.441750000000003,"M":78.45455000000001},{"J":17.44177,"M":78.45444},{"J":17.44181,"M":78.45434},{"J":17.441850000000002,"M":78.45426},{"J":17.44191,"M":78.4542},{"J":17.44197,"M":78.45415000000001},{"J":17.442040000000002,"M":78.45409000000001},{"J":17.4421,"M":78.45406000000001},{"J":17.44225,"M":78.45398},{"J":17.44266,"M":78.45381},{"J":17.442890000000002,"M":78.45372},{"J":17.44342,"M":78.45347000000001},{"J":17.44356,"M":78.4534},{"J":17.444360000000003,"M":78.45308},{"J":17.444760000000002,"M":78.45292},{"J":17.445,"M":78.45282},{"J":17.445120000000003,"M":78.45278},{"J":17.44575,"M":78.45249000000001},{"J":17.446530000000003,"M":78.4522},{"J":17.44679,"M":78.45211},{"J":17.446810000000003,"M":78.4521},{"J":17.447210000000002,"M":78.45199000000001},{"J":17.447490000000002,"M":78.45194000000001},{"J":17.44779,"M":78.45192},{"J":17.44806,"M":78.45194000000001},{"J":17.44838,"M":78.45198},{"J":17.44855,"M":78.45201},{"J":17.44857,"M":78.45201},{"J":17.448590000000003,"M":78.45201},{"J":17.448600000000003,"M":78.45200000000001},{"J":17.448610000000002,"M":78.45199000000001},{"J":17.44863,"M":78.45199000000001},{"J":17.44864,"M":78.45198},{"J":17.44865,"M":78.45196},{"J":17.44866,"M":78.45195000000001},{"J":17.44867,"M":78.45192},{"J":17.448680000000003,"M":78.45190000000001},{"J":17.448700000000002,"M":78.45176000000001},{"J":17.448700000000002,"M":78.45171},{"J":17.448710000000002,"M":78.45165},{"J":17.44872,"M":78.45161},{"J":17.44874,"M":78.45149},{"J":17.44877,"M":78.45138},{"J":17.448780000000003,"M":78.45123000000001},{"J":17.448890000000002,"M":78.45034000000001},{"J":17.448960000000003,"M":78.4499}],"lat_lngs":[{"J":17.43992,"M":78.45774},{"J":17.44,"M":78.45758000000001},{"J":17.440080000000002,"M":78.45743},{"J":17.4402,"M":78.4573},{"J":17.440330000000003,"M":78.45718000000001},{"J":17.440450000000002,"M":78.45709000000001},{"J":17.44057,"M":78.45702},{"J":17.440730000000002,"M":78.45696000000001},{"J":17.44086,"M":78.45692000000001},{"J":17.44105,"M":78.45686},{"J":17.44112,"M":78.45684},{"J":17.44122,"M":78.45677},{"J":17.44125,"M":78.45672},{"J":17.441280000000003,"M":78.45669000000001},{"J":17.44131,"M":78.45659},{"J":17.44135,"M":78.45644},{"J":17.44144,"M":78.45607000000001},{"J":17.441580000000002,"M":78.45556},{"J":17.441640000000003,"M":78.45531000000001},{"J":17.44169,"M":78.45501},{"J":17.44173,"M":78.45467000000001},{"J":17.441750000000003,"M":78.45455000000001},{"J":17.44177,"M":78.45444},{"J":17.44181,"M":78.45434},{"J":17.441850000000002,"M":78.45426},{"J":17.44191,"M":78.4542},{"J":17.44197,"M":78.45415000000001},{"J":17.442040000000002,"M":78.45409000000001},{"J":17.4421,"M":78.45406000000001},{"J":17.44225,"M":78.45398},{"J":17.44266,"M":78.45381},{"J":17.442890000000002,"M":78.45372},{"J":17.44342,"M":78.45347000000001},{"J":17.44356,"M":78.4534},{"J":17.444360000000003,"M":78.45308},{"J":17.444760000000002,"M":78.45292},{"J":17.445,"M":78.45282},{"J":17.445120000000003,"M":78.45278},{"J":17.44575,"M":78.45249000000001},{"J":17.446530000000003,"M":78.4522},{"J":17.44679,"M":78.45211},{"J":17.446810000000003,"M":78.4521},{"J":17.447210000000002,"M":78.45199000000001},{"J":17.447490000000002,"M":78.45194000000001},{"J":17.44779,"M":78.45192},{"J":17.44806,"M":78.45194000000001},{"J":17.44838,"M":78.45198},{"J":17.44855,"M":78.45201},{"J":17.44857,"M":78.45201},{"J":17.448590000000003,"M":78.45201},{"J":17.448600000000003,"M":78.45200000000001},{"J":17.448610000000002,"M":78.45199000000001},{"J":17.44863,"M":78.45199000000001},{"J":17.44864,"M":78.45198},{"J":17.44865,"M":78.45196},{"J":17.44866,"M":78.45195000000001},{"J":17.44867,"M":78.45192},{"J":17.448680000000003,"M":78.45190000000001},{"J":17.448700000000002,"M":78.45176000000001},{"J":17.448700000000002,"M":78.45171},{"J":17.448710000000002,"M":78.45165},{"J":17.44872,"M":78.45161},{"J":17.44874,"M":78.45149},{"J":17.44877,"M":78.45138},{"J":17.448780000000003,"M":78.45123000000001},{"J":17.448890000000002,"M":78.45034000000001},{"J":17.448960000000003,"M":78.4499}],"instructions":"Turn <b>right</b>","start_point":{"J":17.4399213,"M":78.45773510000004},"end_point":{"J":17.4489633,"M":78.44989959999998}},{"distance":{"text":"0.3 km","value":262},"duration":{"text":"1 min","value":59},"end_location":{"J":17.4511898,"M":78.45024869999997},"maneuver":"turn-right","polyline":{"points":"__oiB{fy}MAPYIa@KqA[g@Km@KUCA?SC]AmCC"},"start_location":{"J":17.4489633,"M":78.44989959999998},
                    "travel_mode":"DRIVING","encoded_lat_lngs":"__oiB{fy}MAPYIa@KqA[g@Km@KUCA?SC]AmCC","path":[{"J":17.448960000000003,"M":78.4499},{"J":17.448970000000003,"M":78.44981},{"J":17.4491,"M":78.44986},{"J":17.449270000000002,"M":78.44992},{"J":17.44968,"M":78.45006000000001},{"J":17.44988,"M":78.45012000000001},{"J":17.450110000000002,"M":78.45018},{"J":17.45022,"M":78.45020000000001},{"J":17.45023,"M":78.45020000000001},{"J":17.45033,"M":78.45022},{"J":17.450480000000002,"M":78.45023},{"J":17.45119,"M":78.45025000000001}],"lat_lngs":[{"J":17.448960000000003,"M":78.4499},{"J":17.448970000000003,"M":78.44981},{"J":17.4491,"M":78.44986},{"J":17.449270000000002,"M":78.44992},{"J":17.44968,"M":78.45006000000001},{"J":17.44988,"M":78.45012000000001},{"J":17.450110000000002,"M":78.45018},{"J":17.45022,"M":78.45020000000001},{"J":17.45023,"M":78.45020000000001},{"J":17.45033,"M":78.45022},{"J":17.450480000000002,"M":78.45023},{"J":17.45119,"M":78.45025000000001}],"instructions":"Turn <b>right</b> onto <b>Balkampet Rd</b><div style=\"font-size:0.9em\">Pass by IBP Petrol pump (on the left)</div>","start_point":{"J":17.4489633,"M":78.44989959999998},"end_point":{"J":17.4511898,"M":78.45024869999997}},{"distance":{"text":"1.7 km","value":1652},"duration":{"text":"5 mins","value":304},"end_location":{"J":17.4654669,"M":78.44901000000004},"maneuver":"straight","polyline":{"points":"}loiBaiy}Mq@CA?KE_DI{@CM?Q@Q@YBWF[HWJsBv@c@J]BYBWA[CIASE]M_@Qi@g@s@g@EAi@]YI[GYASAk@BK@cALqAVg@LSFi@Jg@NK@IH]Hk@NIBq@RSJOFIBm@Vg@NODMBi@B}@Dy@DK?_AFG?aBDW@W?s@BC?oADeADS?sADmABU@Q@m@D_@DC@QDUDo@Nw@Fo@@E?K?G?I?GAUC"},"start_location":{"J":17.4511898,"M":78.45024869999997},"travel_mode":"DRIVING","encoded_lat_lngs":"}loiBaiy}Mq@CA?KE_DI{@CM?Q@Q@YBWF[HWJsBv@c@J]BYBWA[CIASE]M_@Qi@g@s@g@EAi@]YI[GYASAk@BK@cALqAVg@LSFi@Jg@NK@IH]Hk@NIBq@RSJOFIBm@Vg@NODMBi@B}@Dy@DK?_AFG?aBDW@W?s@BC?oADeADS?sADmABU@Q@m@D_@DC@QDUDo@Nw@Fo@@E?K?G?I?GAUC","path":[{"J":17.45119,"M":78.45025000000001},{"J":17.45144,"M":78.45027},{"J":17.45145,"M":78.45027},{"J":17.451510000000003,"M":78.45030000000001},{"J":17.45231,"M":78.45035},{"J":17.45261,"M":78.45037},{"J":17.45268,"M":78.45037},{"J":17.45277,"M":78.45036},{"J":17.45286,"M":78.45035},{"J":17.45299,"M":78.45033000000001},{"J":17.453110000000002,"M":78.45029000000001},{"J":17.45325,"M":78.45024000000001},{"J":17.453370000000003,"M":78.45018},{"J":17.453950000000003,"M":78.4499},{"J":17.454130000000003,"M":78.44984000000001},{"J":17.45428,"M":78.44982},{"J":17.454410000000003,"M":78.44980000000001},{"J":17.454530000000002,"M":78.44981},{"J":17.45467,"M":78.44983},{"J":17.454720000000002,"M":78.44984000000001},{"J":17.45482,"M":78.44987},{"J":17.454970000000003,"M":78.44994000000001},{"J":17.45513,"M":78.45003000000001},{"J":17.455340000000003,"M":78.45023},{"J":17.4556,"M":78.45043000000001},{"J":17.455630000000003,"M":78.45044},{"J":17.455840000000002,"M":78.45059},{"J":17.45597,"M":78.45064},{"J":17.456110000000002,"M":78.45068},{"J":17.45624,"M":78.45069000000001},{"J":17.45634,"M":78.45070000000001},{"J":17.456560000000003,"M":78.45068},{"J":17.45662,"M":78.45067},{"J":17.456960000000002,"M":78.45060000000001},{"J":17.45737,"M":78.45048000000001},{"J":17.45757,"M":78.45041},{"J":17.45767,"M":78.45037},{"J":17.457880000000003,"M":78.45031},{"J":17.458080000000002,"M":78.45023},{"J":17.45814,"M":78.45022},{"J":17.458190000000002,"M":78.45017},{"J":17.45834,"M":78.45012000000001},{"J":17.458560000000002,"M":78.45004},{"J":17.45861,"M":78.45002000000001},{"J":17.45886,"M":78.44992},{"J":17.45896,"M":78.44986},{"J":17.45904,"M":78.44982},{"J":17.45909,"M":78.44980000000001},{"J":17.45932,"M":78.44968},{"J":17.45952,"M":78.4496},{"J":17.459600000000002,"M":78.44957000000001},{"J":17.459670000000003,"M":78.44955},{"J":17.459880000000002,"M":78.44953000000001},{"J":17.46019,"M":78.4495},{"J":17.46048,"M":78.44947},{"J":17.46054,"M":78.44947},{"J":17.46086,"M":78.44943},{"J":17.460900000000002,"M":78.44943},{"J":17.46139,"M":78.44940000000001},{"J":17.46151,"M":78.44939000000001},{"J":17.461630000000003,"M":78.44939000000001},{"J":17.46189,"M":78.44937},{"J":17.461910000000003,"M":78.44937},{"J":17.462310000000002,"M":78.44934},{"J":17.462660000000003,"M":78.44931000000001},{"J":17.462760000000003,"M":78.44931000000001},{"J":17.46318,"M":78.44928},{"J":17.46357,"M":78.44926000000001},{"J":17.46368,"M":78.44925},{"J":17.46377,"M":78.44924},{"J":17.464000000000002,"M":78.44921000000001},{"J":17.46416,"M":78.44918000000001},{"J":17.464180000000002,"M":78.44917000000001},{"J":17.464270000000003,"M":78.44914},{"J":17.464380000000002,"M":78.44911},{"J":17.46462,"M":78.44903000000001},{"J":17.4649,"M":78.44899000000001},{"J":17.46514,"M":78.44898},{"J":17.46517,"M":78.44898},{"J":17.465230000000002,"M":78.44898},{"J":17.46527,"M":78.44898},{"J":17.465320000000002,"M":78.44898},{"J":17.46536,"M":78.44899000000001},{"J":17.46547,"M":78.44901}],"lat_lngs":[{"J":17.45119,"M":78.45025000000001},{"J":17.45144,"M":78.45027},{"J":17.45145,"M":78.45027},{"J":17.451510000000003,"M":78.45030000000001},{"J":17.45231,"M":78.45035},{"J":17.45261,"M":78.45037},{"J":17.45268,"M":78.45037},{"J":17.45277,"M":78.45036},{"J":17.45286,"M":78.45035},{"J":17.45299,"M":78.45033000000001},{"J":17.453110000000002,"M":78.45029000000001},{"J":17.45325,"M":78.45024000000001},{"J":17.453370000000003,"M":78.45018},{"J":17.453950000000003,"M":78.4499},{"J":17.454130000000003,"M":78.44984000000001},{"J":17.45428,"M":78.44982},{"J":17.454410000000003,"M":78.44980000000001},{"J":17.454530000000002,"M":78.44981},{"J":17.45467,"M":78.44983},{"J":17.454720000000002,"M":78.44984000000001},{"J":17.45482,"M":78.44987},{"J":17.454970000000003,"M":78.44994000000001},{"J":17.45513,"M":78.45003000000001},{"J":17.455340000000003,"M":78.45023},{"J":17.4556,"M":78.45043000000001},{"J":17.455630000000003,"M":78.45044},{"J":17.455840000000002,"M":78.45059},{"J":17.45597,"M":78.45064},{"J":17.456110000000002,"M":78.45068},{"J":17.45624,"M":78.45069000000001},{"J":17.45634,"M":78.45070000000001},{"J":17.456560000000003,"M":78.45068},{"J":17.45662,"M":78.45067},{"J":17.456960000000002,"M":78.45060000000001},{"J":17.45737,"M":78.45048000000001},{"J":17.45757,"M":78.45041},{"J":17.45767,"M":78.45037},{"J":17.457880000000003,"M":78.45031},{"J":17.458080000000002,"M":78.45023},{"J":17.45814,"M":78.45022},{"J":17.458190000000002,"M":78.45017},{"J":17.45834,"M":78.45012000000001},{"J":17.458560000000002,"M":78.45004},{"J":17.45861,"M":78.45002000000001},{"J":17.45886,"M":78.44992},{"J":17.45896,"M":78.44986},{"J":17.45904,"M":78.44982},{"J":17.45909,"M":78.44980000000001},{"J":17.45932,"M":78.44968},{"J":17.45952,"M":78.4496},{"J":17.459600000000002,"M":78.44957000000001},{"J":17.459670000000003,"M":78.44955},{"J":17.459880000000002,"M":78.44953000000001},{"J":17.46019,"M":78.4495},{"J":17.46048,"M":78.44947},{"J":17.46054,"M":78.44947},{"J":17.46086,"M":78.44943},{"J":17.460900000000002,"M":78.44943},{"J":17.46139,"M":78.44940000000001},{"J":17.46151,"M":78.44939000000001},{"J":17.461630000000003,"M":78.44939000000001},{"J":17.46189,"M":78.44937},{"J":17.461910000000003,"M":78.44937},{"J":17.462310000000002,"M":78.44934},{"J":17.462660000000003,"M":78.44931000000001},{"J":17.462760000000003,"M":78.44931000000001},{"J":17.46318,"M":78.44928},{"J":17.46357,"M":78.44926000000001},{"J":17.46368,"M":78.44925},{"J":17.46377,"M":78.44924},{"J":17.464000000000002,"M":78.44921000000001},{"J":17.46416,"M":78.44918000000001},{"J":17.464180000000002,"M":78.44917000000001},{"J":17.464270000000003,"M":78.44914},{"J":17.464380000000002,"M":78.44911},{"J":17.46462,"M":78.44903000000001},{"J":17.4649,"M":78.44899000000001},{"J":17.46514,"M":78.44898},{"J":17.46517,"M":78.44898},{"J":17.465230000000002,"M":78.44898},{"J":17.46527,"M":78.44898},{"J":17.465320000000002,"M":78.44898},{"J":17.46536,"M":78.44899000000001},{"J":17.46547,"M":78.44901}],"instructions":"Continue straight onto <b>Balkampet Rd/Fathe Nagar Main Rd</b><div style=\"font-size:0.9em\">Continue to follow Fathe Nagar Main Rd</div><div style=\"font-size:0.9em\">Pass by ICICI ATM (on the right in 1.6&nbsp;km)</div>","start_point":{"J":17.4511898,"M":78.45024869999997},"end_point":{"J":17.4654669,"M":78.44901000000004}},{"distance":{"text":"1.4 km","value":1377},"duration":{"text":"4 mins","value":247},"end_location":{"J":17.4702559,"M":78.43706689999999},
                    "maneuver":"turn-left","polyline":{"points":"efriBiay}MOd@g@tA_@fAg@lAIVw@xB[t@Yv@[z@ITIR}A|DoAfDUt@Y`AYhAER[nAc@bBAFe@fBm@jC[rAOj@]rAm@lCUz@Sz@YbAUbAWdAWfA"},"start_location":{"J":17.4654669,"M":78.44901000000004},"travel_mode":"DRIVING","encoded_lat_lngs":"efriBiay}MOd@g@tA_@fAg@lAIVw@xB[t@Yv@[z@ITIR}A|DoAfDUt@Y`AYhAER[nAc@bBAFe@fBm@jC[rAOj@]rAm@lCUz@Sz@YbAUbAWdAWfA","path":[{"J":17.46547,"M":78.44901},{"J":17.46555,"M":78.44882000000001},{"J":17.46575,"M":78.44839},{"J":17.46591,"M":78.44803},{"J":17.46611,"M":78.44764},{"J":17.466160000000002,"M":78.44752000000001},{"J":17.466440000000002,"M":78.44691},{"J":17.46658,"M":78.44664},{"J":17.466710000000003,"M":78.44636000000001},{"J":17.46685,"M":78.44606},{"J":17.466900000000003,"M":78.44595000000001},{"J":17.46695,"M":78.44585000000001},{"J":17.46742,"M":78.4449},{"J":17.46782,"M":78.44406000000001},{"J":17.467930000000003,"M":78.44379},{"J":17.46806,"M":78.44346},{"J":17.46819,"M":78.44309000000001},{"J":17.468220000000002,"M":78.44299000000001},{"J":17.46836,"M":78.44259000000001},{"J":17.46854,"M":78.44209000000001},{"J":17.46855,"M":78.44205000000001},{"J":17.46874,"M":78.44153},{"J":17.468970000000002,"M":78.44083},{"J":17.46911,"M":78.44041},{"J":17.46919,"M":78.44019},{"J":17.469340000000003,"M":78.43977000000001},{"J":17.46957,"M":78.43906000000001},{"J":17.46968,"M":78.43876},{"J":17.46978,"M":78.43846},{"J":17.469910000000002,"M":78.43812000000001},{"J":17.47002,"M":78.43778},{"J":17.47014,"M":78.43743},{"J":17.47026,"M":78.43707}],"lat_lngs":[{"J":17.46547,"M":78.44901},{"J":17.46555,"M":78.44882000000001},{"J":17.46575,"M":78.44839},{"J":17.46591,"M":78.44803},{"J":17.46611,"M":78.44764},{"J":17.466160000000002,"M":78.44752000000001},{"J":17.466440000000002,"M":78.44691},{"J":17.46658,"M":78.44664},{"J":17.466710000000003,"M":78.44636000000001},{"J":17.46685,"M":78.44606},{"J":17.466900000000003,"M":78.44595000000001},{"J":17.46695,"M":78.44585000000001},{"J":17.46742,"M":78.4449},{"J":17.46782,"M":78.44406000000001},{"J":17.467930000000003,"M":78.44379},{"J":17.46806,"M":78.44346},{"J":17.46819,"M":78.44309000000001},{"J":17.468220000000002,"M":78.44299000000001},{"J":17.46836,"M":78.44259000000001},{"J":17.46854,"M":78.44209000000001},{"J":17.46855,"M":78.44205000000001},{"J":17.46874,"M":78.44153},{"J":17.468970000000002,"M":78.44083},{"J":17.46911,"M":78.44041},{"J":17.46919,"M":78.44019},{"J":17.469340000000003,"M":78.43977000000001},{"J":17.46957,"M":78.43906000000001},{"J":17.46968,"M":78.43876},{"J":17.46978,"M":78.43846},{"J":17.469910000000002,"M":78.43812000000001},{"J":17.47002,"M":78.43778},{"J":17.47014,"M":78.43743},{"J":17.47026,"M":78.43707}],"instructions":"Turn <b>left</b> at <b>Fathe Nagar Jct</b> onto <b>Balnagar Main Rd</b><div style=\"font-size:0.9em\">Pass by Kid-Care Children's Hospital (on the left in 500&nbsp;m)</div>","start_point":{"J":17.4654669,"M":78.44901000000004},"end_point":{"J":17.4702559,"M":78.43706689999999}},{"distance":{"text":"0.1 km","value":112},"duration":{"text":"2 mins","value":96},"end_location":{"J":17.471199,"M":78.43743870000003},"maneuver":"turn-right","polyline":{"points":"cdsiBuvv}MKCoDeA"},"start_location":{"J":17.4702559,"M":78.43706689999999},"travel_mode":"DRIVING","encoded_lat_lngs":"cdsiBuvv}MKCoDeA","path":[{"J":17.47026,"M":78.43707},{"J":17.47032,"M":78.43709000000001},{"J":17.471200000000003,"M":78.43744000000001}],"lat_lngs":[{"J":17.47026,"M":78.43707},{"J":17.47032,"M":78.43709000000001},{"J":17.471200000000003,"M":78.43744000000001}],"instructions":"Turn <b>right</b>","start_point":{"J":17.4702559,"M":78.43706689999999},"end_point":{"J":17.471199,"M":78.43743870000003}},{"distance":{"text":"0.1 km","value":117},"duration":{"text":"1 min","value":32},"end_location":{"J":17.4714926,"M":78.43637969999997},"maneuver":"turn-left","polyline":{"points":"_jsiB_yv}M[bBGZUrA"},"start_location":{"J":17.471199,"M":78.43743870000003},"travel_mode":"DRIVING","encoded_lat_lngs":"_jsiB_yv}M[bBGZUrA","path":[{"J":17.471200000000003,"M":78.43744000000001},{"J":17.47134,"M":78.43694},{"J":17.47138,"M":78.4368},{"J":17.471490000000003,"M":78.43638}],"lat_lngs":[{"J":17.471200000000003,"M":78.43744000000001},{"J":17.47134,"M":78.43694},{"J":17.47138,"M":78.4368},{"J":17.471490000000003,"M":78.43638}],"instructions":"Turn <b>left</b><div style=\"font-size:0.9em\">Restricted usage road</div>","start_point":{"J":17.471199,"M":78.43743870000003},"end_point":{"J":17.4714926,"M":78.43637969999997}},{"distance":{"text":"0.2 km","value":215},"duration":{"text":"1 min","value":55},"end_location":{"J":17.4733426,"M":78.43697210000005},"maneuver":"turn-right","polyline":{"points":"yksiBkrv}MGAeAUwBe@iBc@aAS"},"start_location":{"J":17.4714926,"M":78.43637969999997},"travel_mode":"DRIVING","encoded_lat_lngs":"yksiBkrv}MGAeAUwBe@iBc@aAS","path":[{"J":17.471490000000003,"M":78.43638},{"J":17.47153,"M":78.43639},{"J":17.471880000000002,"M":78.43650000000001},{"J":17.47248,"M":78.43669000000001},{"J":17.473010000000002,"M":78.43687000000001},{"J":17.47334,"M":78.43697}],"lat_lngs":[{"J":17.471490000000003,"M":78.43638},{"J":17.47153,"M":78.43639},{"J":17.471880000000002,"M":78.43650000000001},{"J":17.47248,"M":78.43669000000001},{"J":17.473010000000002,"M":78.43687000000001},{"J":17.47334,"M":78.43697}],"instructions":"Turn <b>right</b><div style=\"font-size:0.9em\">Restricted usage road</div>","start_point":{"J":17.4714926,"M":78.43637969999997},"end_point":{"J":17.4733426,"M":78.43697210000005}},{"distance":{"text":"0.2 km","value":156},"duration":{"text":"1 min","value":45},"end_location":{"J":17.4728573,"M":78.4383355},"maneuver":"turn-right","polyline":{"points":"kwsiBavv}MrAgGDEDC"},"start_location":{"J":17.4733426,"M":78.43697210000005},"travel_mode":"DRIVING","encoded_lat_lngs":"kwsiBavv}MrAgGDEDC","path":[{"J":17.47334,"M":78.43697},{"J":17.472920000000002,"M":78.43829000000001},{"J":17.472890000000003,"M":78.43832},{"J":17.47286,"M":78.43834000000001}],"lat_lngs":[{"J":17.47334,"M":78.43697},{"J":17.472920000000002,"M":78.43829000000001},{"J":17.472890000000003,"M":78.43832},{"J":17.47286,"M":78.43834000000001}],"instructions":"Turn <b>right</b>","start_point":{"J":17.4733426,"M":78.43697210000005},"end_point":{"J":17.4728573,"M":78.4383355}}],"via_waypoint":[],"via_waypoints":[]}],"overview_polyline":"adniBqy{}M~A`IX|@f@r@PVj@bAdCzDJNlDdFZRXF`AThG|@NBO^O\\WXq@h@WL_@J_ARa@PKNMp@m@nDUlBKzAKh@SZYTi@T_Cr@eC~@oF~AgAZ}Bx@{Cx@w@RoATw@H{@Bu@CaBMKBIFGn@M`Ag@xHuD}@cAOUCkDEs@CKE_DIiACc@Bq@Js@TsBv@c@Jw@Fs@E]G}@_@i@g@s@g@o@_@u@Qm@Cw@DuCd@mCp@K@IHiAX_Bj@w@Zw@ToDRuDLgBD}FPcBD_AFkARo@Nw@Fu@@e@AUCOd@gA|CeCtGiA|CmDdJo@vB_BpGcFxS{AhGWfAKCoDeA[bB]nBmAWaFiAaASrAgGJI","summary":"Balkampet Rd","warnings":[],"waypoint_order":[],"overview_path":[{"J":17.444650000000003,"M":78.46313},{"J":17.44417,"M":78.46152000000001},{"J":17.44404,"M":78.46121000000001},{"J":17.44384,"M":78.46095000000001},{"J":17.44375,"M":78.46083},{"J":17.443530000000003,"M":78.46049000000001},{"J":17.442860000000003,"M":78.45955000000001},{"J":17.442800000000002,"M":78.45947000000001},{"J":17.441930000000003,"M":78.45832},{"J":17.44179,"M":78.45822000000001},{"J":17.441660000000002,"M":78.45818000000001},{"J":17.44133,"M":78.45807},{"J":17.44,"M":78.45776000000001},{"J":17.43992,"M":78.45774},{"J":17.44,"M":78.45758000000001},{"J":17.440080000000002,"M":78.45743},{"J":17.4402,"M":78.4573},{"J":17.440450000000002,"M":78.45709000000001},{"J":17.44057,"M":78.45702},{"J":17.440730000000002,"M":78.45696000000001},{"J":17.44105,"M":78.45686},{"J":17.44122,"M":78.45677},{"J":17.441280000000003,"M":78.45669000000001},{"J":17.44135,"M":78.45644},{"J":17.441580000000002,"M":78.45556},{"J":17.44169,"M":78.45501},{"J":17.441750000000003,"M":78.45455000000001},{"J":17.44181,"M":78.45434},{"J":17.44191,"M":78.4542},{"J":17.442040000000002,"M":78.45409000000001},{"J":17.44225,"M":78.45398},{"J":17.442890000000002,"M":78.45372},{"J":17.44356,"M":78.4534},{"J":17.444760000000002,"M":78.45292},{"J":17.445120000000003,"M":78.45278},{"J":17.44575,"M":78.45249000000001},{"J":17.446530000000003,"M":78.4522},{"J":17.446810000000003,"M":78.4521},{"J":17.447210000000002,"M":78.45199000000001},{"J":17.447490000000002,"M":78.45194000000001},{"J":17.44779,"M":78.45192},{"J":17.44806,"M":78.45194000000001},{"J":17.44855,"M":78.45201},{"J":17.448610000000002,"M":78.45199000000001},{"J":17.44866,"M":78.45195000000001},{"J":17.448700000000002,"M":78.45171},{"J":17.44877,"M":78.45138},{"J":17.448970000000003,"M":78.44981},{"J":17.44988,"M":78.45012000000001},{"J":17.45022,"M":78.45020000000001},{"J":17.45033,"M":78.45022},{"J":17.45119,"M":78.45025000000001},{"J":17.45145,"M":78.45027},{"J":17.451510000000003,"M":78.45030000000001},{"J":17.45231,"M":78.45035},{"J":17.45268,"M":78.45037},{"J":17.45286,"M":78.45035},{"J":17.453110000000002,"M":78.45029000000001},{"J":17.453370000000003,"M":78.45018},{"J":17.453950000000003,"M":78.4499},{"J":17.454130000000003,"M":78.44984000000001},{"J":17.454410000000003,"M":78.44980000000001},{"J":17.45467,"M":78.44983},{"J":17.45482,"M":78.44987},{"J":17.45513,"M":78.45003000000001},{"J":17.455340000000003,"M":78.45023},{"J":17.4556,"M":78.45043000000001},{"J":17.455840000000002,"M":78.45059},{"J":17.456110000000002,"M":78.45068},{"J":17.45634,"M":78.45070000000001},{"J":17.45662,"M":78.45067},{"J":17.45737,"M":78.45048000000001},{"J":17.458080000000002,"M":78.45023},{"J":17.45814,"M":78.45022},{"J":17.458190000000002,"M":78.45017},{"J":17.458560000000002,"M":78.45004},{"J":17.45904,"M":78.44982},{"J":17.45932,"M":78.44968},{"J":17.459600000000002,"M":78.44957000000001},{"J":17.46048,"M":78.44947},{"J":17.46139,"M":78.44940000000001},{"J":17.461910000000003,"M":78.44937},{"J":17.46318,"M":78.44928},{"J":17.46368,"M":78.44925},{"J":17.464000000000002,"M":78.44921000000001},{"J":17.464380000000002,"M":78.44911},{"J":17.46462,"M":78.44903000000001},{"J":17.4649,"M":78.44899000000001},{"J":17.46517,"M":78.44898},{"J":17.46536,"M":78.44899000000001},{"J":17.46547,"M":78.44901},{"J":17.46555,"M":78.44882000000001},{"J":17.46591,"M":78.44803},{"J":17.46658,"M":78.44664},{"J":17.46695,"M":78.44585000000001},{"J":17.46782,"M":78.44406000000001},{"J":17.46806,"M":78.44346},{"J":17.46854,"M":78.44209000000001},{"J":17.46968,"M":78.43876},{"J":17.47014,"M":78.43743},{"J":17.47026,"M":78.43707},{"J":17.47032,"M":78.43709000000001},{"J":17.471200000000003,"M":78.43744000000001},{"J":17.47134,"M":78.43694},{"J":17.471490000000003,"M":78.43638},{"J":17.471880000000002,"M":78.43650000000001},{"J":17.473010000000002,"M":78.43687000000001},{"J":17.47334,"M":78.43697},{"J":17.472920000000002,"M":78.43829000000001},{"J":17.47286,"M":78.43834000000001}]}]}


   
   // match or serach for matches

   {
   	"startLocation":{"type":"Point","coordinates":[78.46109000000001,17.44433]},
   "endLocation":{"type":"Point","coordinates":[78.43966820000003,17.4733375]},
   "timeToLeave":"2015-09-18T10:15:18+00:00",
   "user_id":"b9a71512-35fc-49ba-99a0-d7a1c662b387"
}

//share user info

{
	"trip_id":"f5ced33c-f622-41f8-a52b-a98266caea9e",
	"user_id":"b9a71512-35fc-49ba-99a0-d7a1c662b387"
}

//contact user

{
"user_id":"b9a71512-35fc-49ba-99a0-d7a1c662b387",
"trip_id":"f5ced33c-f622-41f8-a52b-a98266caea9e"
}

//matched user info
	{
"from":"HPS Bus Stop, Begumpet Road, Begumpet, Hyderabad, Telangana, India",
  "to":"IIIT, Gachibowli, Hyderabad, Telangana, India",
  "start_time":"5:30 PM",
  "start_date":"20 January, 2015",
  "user_id":"b9a71512-35fc-49ba-99a0-d7a1c662b387"
}

*/

before(function(done){
	 db = mongoose.connect("mongodb://localhost/test");
	 user1.save();
	 user2.save();
	done();
});

describe('Passenger Controller tests',function(){

    it('should say successfullt finded the near taxies',function(done){

    	var req = {

    	};

    	req.body = {coordinates: [78.46109000000001, 17.44433]};

    	var res = {
    		status:sinon.spy(),
    		send:sinon.spy()
    	}

    	passengerController.findNearTaxies(req,res);

    	setTimeout(function(){
    		res.status.calledWith(200).should.equal(true,"NEAR taxies finded successfully");
    		done();
    	},1000);

    });

    it('should say successfully inserted the trip',function(done){

    	var req = {

    	};

    	req.body = {"startLocation":{"location":{"type":"Point","coordinates":[78.46109000000001,17.44433]},
"full_address":"1-10-74, Begumpet Rd, Old Patigadda, Chikoti Gardens, Begumpet, Hyderabad, Telangana 500016, India"},
"endLocation":{"location":{"type":"Point","coordinates":[78.43966820000003,17.4733375]},
"full_address":"Kukatpally Industrial Estate, Balanagar, Hyderabad, Telangana, India"},
"timeToLeave":"2015-09-18T10:15:18+00:00",
"user_id":"1",
"directionsResult":[{"bounds":{"Qa":{"J":17.43992,"j":17.47334},"Ma":{"j":78.43638,"J":78.46313}},
                    "copyrights":"Map data Â©2015 Google","legs":[{"distance":{"text":"6.2 km","value":6216},
                    "duration":{"text":"19 mins","value":1149},
                    "end_address":"Kukatpally Industrial Estate, Balanagar, Hyderabad, Telangana, India",
                    "end_location":{"J":17.4728573,"M":78.4383355},
                    "start_address":"1-10-74/1, Begumpet Rd, Old Patigadda, Chikoti Gardens, Begumpet, Hyderabad, Telangana 500016, India","start_location":{"J":17.4446511,"M":78.46312910000006},"steps":[{"distance":{"text":"0.6 km","value":620},"duration":{"text":"1 min","value":64},"end_location":{"J":17.44179,"M":78.45821869999997},"polyline":{"points":"adniBqy{}MHh@r@fDBR\\zAX|@f@r@FJHJFLDHXf@BBb@t@FJx@lA^j@HJ@BlDdFZR"},"start_location":{"J":17.4446511,"M":78.46312910000006},"travel_mode":"DRIVING","encoded_lat_lngs":"adniBqy{}MHh@r@fDBR\\zAX|@f@r@FJHJFLDHXf@BBb@t@FJx@lA^j@HJ@BlDdFZR","path":[{"J":17.444650000000003,"M":78.46313},{"J":17.4446,"M":78.46292000000001},{"J":17.44434,"M":78.46208},{"J":17.44432,"M":78.46198000000001},{"J":17.44417,"M":78.46152000000001},{"J":17.44404,"M":78.46121000000001},{"J":17.44384,"M":78.46095000000001},{"J":17.443800000000003,"M":78.46089},{"J":17.44375,"M":78.46083},{"J":17.443710000000003,"M":78.46076000000001},{"J":17.44368,"M":78.46071},{"J":17.443550000000002,"M":78.46051000000001},{"J":17.443530000000003,"M":78.46049000000001},{"J":17.443350000000002,"M":78.46022},{"J":17.44331,"M":78.46016},{"J":17.44302,"M":78.45977},{"J":17.442860000000003,"M":78.45955000000001},{"J":17.44281,"M":78.45949},{"J":17.442800000000002,"M":78.45947000000001},{"J":17.441930000000003,"M":78.45832},{"J":17.44179,"M":78.45822000000001}],"lat_lngs":[{"J":17.444650000000003,"M":78.46313},{"J":17.4446,"M":78.46292000000001},{"J":17.44434,"M":78.46208},{"J":17.44432,"M":78.46198000000001},{"J":17.44417,"M":78.46152000000001},{"J":17.44404,"M":78.46121000000001},{"J":17.44384,"M":78.46095000000001},{"J":17.443800000000003,"M":78.46089},{"J":17.44375,"M":78.46083},{"J":17.443710000000003,"M":78.46076000000001},{"J":17.44368,"M":78.46071},{"J":17.443550000000002,"M":78.46051000000001},{"J":17.443530000000003,"M":78.46049000000001},{"J":17.443350000000002,"M":78.46022},{"J":17.44331,"M":78.46016},{"J":17.44302,"M":78.45977},{"J":17.442860000000003,"M":78.45955000000001},{"J":17.44281,"M":78.45949},{"J":17.442800000000002,"M":78.45947000000001},{"J":17.441930000000003,"M":78.45832},{"J":17.44179,"M":78.45822000000001}],
                    "instructions":"Head <b>west</b> on <b>Begumpet Rd/Inner Ring Rd</b> toward <b>Mayuri Marg</b><div style=\"font-size:0.9em\">Pass by Begumpet Petrol Pump (on the right)</div>","maneuver":"",
                    "start_point":{"J":17.4446511,"M":78.46312910000006},
                    "end_point":{"J":17.44179,"M":78.45821869999997}},
                    {"distance":{"text":"0.2 km","value":205},
                    "duration":{"text":"1 min","value":52},
                    "end_location":{"J":17.4399984,"M":78.45776019999994},
                    "polyline":{"points":"ermiB{zz}ML@JDTFj@LjBZvARn@HTB"},
                    "start_location":{"J":17.44179,"M":78.45821869999997},
                    "travel_mode":"DRIVING","encoded_lat_lngs":"ermiB{zz}ML@JDTFj@LjBZvARn@HTB",
                    "path":[{"J":17.44179,"M":78.45822000000001},{"J":17.44172,"M":78.45821000000001},{"J":17.441660000000002,"M":78.45818000000001},{"J":17.441550000000003,"M":78.45814},{"J":17.44133,"M":78.45807},{"J":17.44079,"M":78.45793},{"J":17.440350000000002,"M":78.45783},{"J":17.44011,"M":78.45778},{"J":17.44,"M":78.45776000000001}],"lat_lngs":[{"J":17.44179,"M":78.45822000000001},{"J":17.44172,"M":78.45821000000001},{"J":17.441660000000002,"M":78.45818000000001},{"J":17.441550000000003,"M":78.45814},{"J":17.44133,"M":78.45807},{"J":17.44079,"M":78.45793},{"J":17.440350000000002,"M":78.45783},{"J":17.44011,"M":78.45778},{"J":17.44,"M":78.45776000000001}],"instructions":"Take the ramp to <b>Begumpet-Brahmanvadi Rd</b>","maneuver":"","start_point":{"J":17.44179,"M":78.45821869999997},"end_point":{"J":17.4399984,"M":78.45776019999994}},{"distance":{"text":"9 m","value":9},"duration":{"text":"1 min","value":4},"end_location":{"J":17.4399213,"M":78.45773510000004},"polyline":{"points":"_gmiB_xz}MNB"},"start_location":{"J":17.4399984,"M":78.45776019999994},
                    "travel_mode":"DRIVING","encoded_lat_lngs":"_gmiB_xz}MNB","path":[{"J":17.44,"M":78.45776000000001},{"J":17.43992,"M":78.45774}],"lat_lngs":[{"J":17.44,"M":78.45776000000001},{"J":17.43992,"M":78.45774}],"instructions":"Continue onto <b>Begumpet-Brahmanvadi Rd</b>","maneuver":"","start_point":{"J":17.4399984,"M":78.45776019999994},"end_point":{"J":17.4399213,"M":78.45773510000004}},{"distance":{"text":"1.5 km","value":1491},"duration":{"text":"3 mins","value":191},"end_location":{"J":17.4489633,"M":78.44989959999998},"maneuver":"turn-right","polyline":{"points":"ofmiB{wz}MO^O\\WXYVWPWL_@JYFe@JMBSLEHEDERG\\QhA[dBKp@Iz@GbACVCTGRGNKJKHMJKD]NqA`@m@PiBp@[L_D~@oA^o@RWF}Bx@{Cx@s@PC@oATw@H{@Bu@C_AGa@EC?C?A@A@C?A@ABA@ADABCZ?HAJAFCVETA\\UpDMvA"},"start_location":{"J":17.4399213,"M":78.45773510000004},"travel_mode":"DRIVING","encoded_lat_lngs":"ofmiB{wz}MO^O\\WXYVWPWL_@JYFe@JMBSLEHEDERG\\QhA[dBKp@Iz@GbACVCTGRGNKJKHMJKD]NqA`@m@PiBp@[L_D~@oA^o@RWF}Bx@{Cx@s@PC@oATw@H{@Bu@C_AGa@EC?C?A@A@C?A@ABA@ADABCZ?HAJAFCVETA\\UpDMvA","path":[{"J":17.43992,"M":78.45774},{"J":17.44,"M":78.45758000000001},{"J":17.440080000000002,"M":78.45743},{"J":17.4402,"M":78.4573},{"J":17.440330000000003,"M":78.45718000000001},{"J":17.440450000000002,"M":78.45709000000001},{"J":17.44057,"M":78.45702},{"J":17.440730000000002,"M":78.45696000000001},{"J":17.44086,"M":78.45692000000001},{"J":17.44105,"M":78.45686},{"J":17.44112,"M":78.45684},{"J":17.44122,"M":78.45677},{"J":17.44125,"M":78.45672},{"J":17.441280000000003,"M":78.45669000000001},{"J":17.44131,"M":78.45659},{"J":17.44135,"M":78.45644},{"J":17.44144,"M":78.45607000000001},{"J":17.441580000000002,"M":78.45556},{"J":17.441640000000003,"M":78.45531000000001},{"J":17.44169,"M":78.45501},{"J":17.44173,"M":78.45467000000001},{"J":17.441750000000003,"M":78.45455000000001},{"J":17.44177,"M":78.45444},{"J":17.44181,"M":78.45434},{"J":17.441850000000002,"M":78.45426},{"J":17.44191,"M":78.4542},{"J":17.44197,"M":78.45415000000001},{"J":17.442040000000002,"M":78.45409000000001},{"J":17.4421,"M":78.45406000000001},{"J":17.44225,"M":78.45398},{"J":17.44266,"M":78.45381},{"J":17.442890000000002,"M":78.45372},{"J":17.44342,"M":78.45347000000001},{"J":17.44356,"M":78.4534},{"J":17.444360000000003,"M":78.45308},{"J":17.444760000000002,"M":78.45292},{"J":17.445,"M":78.45282},{"J":17.445120000000003,"M":78.45278},{"J":17.44575,"M":78.45249000000001},{"J":17.446530000000003,"M":78.4522},{"J":17.44679,"M":78.45211},{"J":17.446810000000003,"M":78.4521},{"J":17.447210000000002,"M":78.45199000000001},{"J":17.447490000000002,"M":78.45194000000001},{"J":17.44779,"M":78.45192},{"J":17.44806,"M":78.45194000000001},{"J":17.44838,"M":78.45198},{"J":17.44855,"M":78.45201},{"J":17.44857,"M":78.45201},{"J":17.448590000000003,"M":78.45201},{"J":17.448600000000003,"M":78.45200000000001},{"J":17.448610000000002,"M":78.45199000000001},{"J":17.44863,"M":78.45199000000001},{"J":17.44864,"M":78.45198},{"J":17.44865,"M":78.45196},{"J":17.44866,"M":78.45195000000001},{"J":17.44867,"M":78.45192},{"J":17.448680000000003,"M":78.45190000000001},{"J":17.448700000000002,"M":78.45176000000001},{"J":17.448700000000002,"M":78.45171},{"J":17.448710000000002,"M":78.45165},{"J":17.44872,"M":78.45161},{"J":17.44874,"M":78.45149},{"J":17.44877,"M":78.45138},{"J":17.448780000000003,"M":78.45123000000001},{"J":17.448890000000002,"M":78.45034000000001},{"J":17.448960000000003,"M":78.4499}],"lat_lngs":[{"J":17.43992,"M":78.45774},{"J":17.44,"M":78.45758000000001},{"J":17.440080000000002,"M":78.45743},{"J":17.4402,"M":78.4573},{"J":17.440330000000003,"M":78.45718000000001},{"J":17.440450000000002,"M":78.45709000000001},{"J":17.44057,"M":78.45702},{"J":17.440730000000002,"M":78.45696000000001},{"J":17.44086,"M":78.45692000000001},{"J":17.44105,"M":78.45686},{"J":17.44112,"M":78.45684},{"J":17.44122,"M":78.45677},{"J":17.44125,"M":78.45672},{"J":17.441280000000003,"M":78.45669000000001},{"J":17.44131,"M":78.45659},{"J":17.44135,"M":78.45644},{"J":17.44144,"M":78.45607000000001},{"J":17.441580000000002,"M":78.45556},{"J":17.441640000000003,"M":78.45531000000001},{"J":17.44169,"M":78.45501},{"J":17.44173,"M":78.45467000000001},{"J":17.441750000000003,"M":78.45455000000001},{"J":17.44177,"M":78.45444},{"J":17.44181,"M":78.45434},{"J":17.441850000000002,"M":78.45426},{"J":17.44191,"M":78.4542},{"J":17.44197,"M":78.45415000000001},{"J":17.442040000000002,"M":78.45409000000001},{"J":17.4421,"M":78.45406000000001},{"J":17.44225,"M":78.45398},{"J":17.44266,"M":78.45381},{"J":17.442890000000002,"M":78.45372},{"J":17.44342,"M":78.45347000000001},{"J":17.44356,"M":78.4534},{"J":17.444360000000003,"M":78.45308},{"J":17.444760000000002,"M":78.45292},{"J":17.445,"M":78.45282},{"J":17.445120000000003,"M":78.45278},{"J":17.44575,"M":78.45249000000001},{"J":17.446530000000003,"M":78.4522},{"J":17.44679,"M":78.45211},{"J":17.446810000000003,"M":78.4521},{"J":17.447210000000002,"M":78.45199000000001},{"J":17.447490000000002,"M":78.45194000000001},{"J":17.44779,"M":78.45192},{"J":17.44806,"M":78.45194000000001},{"J":17.44838,"M":78.45198},{"J":17.44855,"M":78.45201},{"J":17.44857,"M":78.45201},{"J":17.448590000000003,"M":78.45201},{"J":17.448600000000003,"M":78.45200000000001},{"J":17.448610000000002,"M":78.45199000000001},{"J":17.44863,"M":78.45199000000001},{"J":17.44864,"M":78.45198},{"J":17.44865,"M":78.45196},{"J":17.44866,"M":78.45195000000001},{"J":17.44867,"M":78.45192},{"J":17.448680000000003,"M":78.45190000000001},{"J":17.448700000000002,"M":78.45176000000001},{"J":17.448700000000002,"M":78.45171},{"J":17.448710000000002,"M":78.45165},{"J":17.44872,"M":78.45161},{"J":17.44874,"M":78.45149},{"J":17.44877,"M":78.45138},{"J":17.448780000000003,"M":78.45123000000001},{"J":17.448890000000002,"M":78.45034000000001},{"J":17.448960000000003,"M":78.4499}],"instructions":"Turn <b>right</b>","start_point":{"J":17.4399213,"M":78.45773510000004},"end_point":{"J":17.4489633,"M":78.44989959999998}},{"distance":{"text":"0.3 km","value":262},"duration":{"text":"1 min","value":59},"end_location":{"J":17.4511898,"M":78.45024869999997},"maneuver":"turn-right","polyline":{"points":"__oiB{fy}MAPYIa@KqA[g@Km@KUCA?SC]AmCC"},"start_location":{"J":17.4489633,"M":78.44989959999998},
                    "travel_mode":"DRIVING","encoded_lat_lngs":"__oiB{fy}MAPYIa@KqA[g@Km@KUCA?SC]AmCC","path":[{"J":17.448960000000003,"M":78.4499},{"J":17.448970000000003,"M":78.44981},{"J":17.4491,"M":78.44986},{"J":17.449270000000002,"M":78.44992},{"J":17.44968,"M":78.45006000000001},{"J":17.44988,"M":78.45012000000001},{"J":17.450110000000002,"M":78.45018},{"J":17.45022,"M":78.45020000000001},{"J":17.45023,"M":78.45020000000001},{"J":17.45033,"M":78.45022},{"J":17.450480000000002,"M":78.45023},{"J":17.45119,"M":78.45025000000001}],"lat_lngs":[{"J":17.448960000000003,"M":78.4499},{"J":17.448970000000003,"M":78.44981},{"J":17.4491,"M":78.44986},{"J":17.449270000000002,"M":78.44992},{"J":17.44968,"M":78.45006000000001},{"J":17.44988,"M":78.45012000000001},{"J":17.450110000000002,"M":78.45018},{"J":17.45022,"M":78.45020000000001},{"J":17.45023,"M":78.45020000000001},{"J":17.45033,"M":78.45022},{"J":17.450480000000002,"M":78.45023},{"J":17.45119,"M":78.45025000000001}],"instructions":"Turn <b>right</b> onto <b>Balkampet Rd</b><div style=\"font-size:0.9em\">Pass by IBP Petrol pump (on the left)</div>","start_point":{"J":17.4489633,"M":78.44989959999998},"end_point":{"J":17.4511898,"M":78.45024869999997}},{"distance":{"text":"1.7 km","value":1652},"duration":{"text":"5 mins","value":304},"end_location":{"J":17.4654669,"M":78.44901000000004},"maneuver":"straight","polyline":{"points":"}loiBaiy}Mq@CA?KE_DI{@CM?Q@Q@YBWF[HWJsBv@c@J]BYBWA[CIASE]M_@Qi@g@s@g@EAi@]YI[GYASAk@BK@cALqAVg@LSFi@Jg@NK@IH]Hk@NIBq@RSJOFIBm@Vg@NODMBi@B}@Dy@DK?_AFG?aBDW@W?s@BC?oADeADS?sADmABU@Q@m@D_@DC@QDUDo@Nw@Fo@@E?K?G?I?GAUC"},"start_location":{"J":17.4511898,"M":78.45024869999997},"travel_mode":"DRIVING","encoded_lat_lngs":"}loiBaiy}Mq@CA?KE_DI{@CM?Q@Q@YBWF[HWJsBv@c@J]BYBWA[CIASE]M_@Qi@g@s@g@EAi@]YI[GYASAk@BK@cALqAVg@LSFi@Jg@NK@IH]Hk@NIBq@RSJOFIBm@Vg@NODMBi@B}@Dy@DK?_AFG?aBDW@W?s@BC?oADeADS?sADmABU@Q@m@D_@DC@QDUDo@Nw@Fo@@E?K?G?I?GAUC","path":[{"J":17.45119,"M":78.45025000000001},{"J":17.45144,"M":78.45027},{"J":17.45145,"M":78.45027},{"J":17.451510000000003,"M":78.45030000000001},{"J":17.45231,"M":78.45035},{"J":17.45261,"M":78.45037},{"J":17.45268,"M":78.45037},{"J":17.45277,"M":78.45036},{"J":17.45286,"M":78.45035},{"J":17.45299,"M":78.45033000000001},{"J":17.453110000000002,"M":78.45029000000001},{"J":17.45325,"M":78.45024000000001},{"J":17.453370000000003,"M":78.45018},{"J":17.453950000000003,"M":78.4499},{"J":17.454130000000003,"M":78.44984000000001},{"J":17.45428,"M":78.44982},{"J":17.454410000000003,"M":78.44980000000001},{"J":17.454530000000002,"M":78.44981},{"J":17.45467,"M":78.44983},{"J":17.454720000000002,"M":78.44984000000001},{"J":17.45482,"M":78.44987},{"J":17.454970000000003,"M":78.44994000000001},{"J":17.45513,"M":78.45003000000001},{"J":17.455340000000003,"M":78.45023},{"J":17.4556,"M":78.45043000000001},{"J":17.455630000000003,"M":78.45044},{"J":17.455840000000002,"M":78.45059},{"J":17.45597,"M":78.45064},{"J":17.456110000000002,"M":78.45068},{"J":17.45624,"M":78.45069000000001},{"J":17.45634,"M":78.45070000000001},{"J":17.456560000000003,"M":78.45068},{"J":17.45662,"M":78.45067},{"J":17.456960000000002,"M":78.45060000000001},{"J":17.45737,"M":78.45048000000001},{"J":17.45757,"M":78.45041},{"J":17.45767,"M":78.45037},{"J":17.457880000000003,"M":78.45031},{"J":17.458080000000002,"M":78.45023},{"J":17.45814,"M":78.45022},{"J":17.458190000000002,"M":78.45017},{"J":17.45834,"M":78.45012000000001},{"J":17.458560000000002,"M":78.45004},{"J":17.45861,"M":78.45002000000001},{"J":17.45886,"M":78.44992},{"J":17.45896,"M":78.44986},{"J":17.45904,"M":78.44982},{"J":17.45909,"M":78.44980000000001},{"J":17.45932,"M":78.44968},{"J":17.45952,"M":78.4496},{"J":17.459600000000002,"M":78.44957000000001},{"J":17.459670000000003,"M":78.44955},{"J":17.459880000000002,"M":78.44953000000001},{"J":17.46019,"M":78.4495},{"J":17.46048,"M":78.44947},{"J":17.46054,"M":78.44947},{"J":17.46086,"M":78.44943},{"J":17.460900000000002,"M":78.44943},{"J":17.46139,"M":78.44940000000001},{"J":17.46151,"M":78.44939000000001},{"J":17.461630000000003,"M":78.44939000000001},{"J":17.46189,"M":78.44937},{"J":17.461910000000003,"M":78.44937},{"J":17.462310000000002,"M":78.44934},{"J":17.462660000000003,"M":78.44931000000001},{"J":17.462760000000003,"M":78.44931000000001},{"J":17.46318,"M":78.44928},{"J":17.46357,"M":78.44926000000001},{"J":17.46368,"M":78.44925},{"J":17.46377,"M":78.44924},{"J":17.464000000000002,"M":78.44921000000001},{"J":17.46416,"M":78.44918000000001},{"J":17.464180000000002,"M":78.44917000000001},{"J":17.464270000000003,"M":78.44914},{"J":17.464380000000002,"M":78.44911},{"J":17.46462,"M":78.44903000000001},{"J":17.4649,"M":78.44899000000001},{"J":17.46514,"M":78.44898},{"J":17.46517,"M":78.44898},{"J":17.465230000000002,"M":78.44898},{"J":17.46527,"M":78.44898},{"J":17.465320000000002,"M":78.44898},{"J":17.46536,"M":78.44899000000001},{"J":17.46547,"M":78.44901}],"lat_lngs":[{"J":17.45119,"M":78.45025000000001},{"J":17.45144,"M":78.45027},{"J":17.45145,"M":78.45027},{"J":17.451510000000003,"M":78.45030000000001},{"J":17.45231,"M":78.45035},{"J":17.45261,"M":78.45037},{"J":17.45268,"M":78.45037},{"J":17.45277,"M":78.45036},{"J":17.45286,"M":78.45035},{"J":17.45299,"M":78.45033000000001},{"J":17.453110000000002,"M":78.45029000000001},{"J":17.45325,"M":78.45024000000001},{"J":17.453370000000003,"M":78.45018},{"J":17.453950000000003,"M":78.4499},{"J":17.454130000000003,"M":78.44984000000001},{"J":17.45428,"M":78.44982},{"J":17.454410000000003,"M":78.44980000000001},{"J":17.454530000000002,"M":78.44981},{"J":17.45467,"M":78.44983},{"J":17.454720000000002,"M":78.44984000000001},{"J":17.45482,"M":78.44987},{"J":17.454970000000003,"M":78.44994000000001},{"J":17.45513,"M":78.45003000000001},{"J":17.455340000000003,"M":78.45023},{"J":17.4556,"M":78.45043000000001},{"J":17.455630000000003,"M":78.45044},{"J":17.455840000000002,"M":78.45059},{"J":17.45597,"M":78.45064},{"J":17.456110000000002,"M":78.45068},{"J":17.45624,"M":78.45069000000001},{"J":17.45634,"M":78.45070000000001},{"J":17.456560000000003,"M":78.45068},{"J":17.45662,"M":78.45067},{"J":17.456960000000002,"M":78.45060000000001},{"J":17.45737,"M":78.45048000000001},{"J":17.45757,"M":78.45041},{"J":17.45767,"M":78.45037},{"J":17.457880000000003,"M":78.45031},{"J":17.458080000000002,"M":78.45023},{"J":17.45814,"M":78.45022},{"J":17.458190000000002,"M":78.45017},{"J":17.45834,"M":78.45012000000001},{"J":17.458560000000002,"M":78.45004},{"J":17.45861,"M":78.45002000000001},{"J":17.45886,"M":78.44992},{"J":17.45896,"M":78.44986},{"J":17.45904,"M":78.44982},{"J":17.45909,"M":78.44980000000001},{"J":17.45932,"M":78.44968},{"J":17.45952,"M":78.4496},{"J":17.459600000000002,"M":78.44957000000001},{"J":17.459670000000003,"M":78.44955},{"J":17.459880000000002,"M":78.44953000000001},{"J":17.46019,"M":78.4495},{"J":17.46048,"M":78.44947},{"J":17.46054,"M":78.44947},{"J":17.46086,"M":78.44943},{"J":17.460900000000002,"M":78.44943},{"J":17.46139,"M":78.44940000000001},{"J":17.46151,"M":78.44939000000001},{"J":17.461630000000003,"M":78.44939000000001},{"J":17.46189,"M":78.44937},{"J":17.461910000000003,"M":78.44937},{"J":17.462310000000002,"M":78.44934},{"J":17.462660000000003,"M":78.44931000000001},{"J":17.462760000000003,"M":78.44931000000001},{"J":17.46318,"M":78.44928},{"J":17.46357,"M":78.44926000000001},{"J":17.46368,"M":78.44925},{"J":17.46377,"M":78.44924},{"J":17.464000000000002,"M":78.44921000000001},{"J":17.46416,"M":78.44918000000001},{"J":17.464180000000002,"M":78.44917000000001},{"J":17.464270000000003,"M":78.44914},{"J":17.464380000000002,"M":78.44911},{"J":17.46462,"M":78.44903000000001},{"J":17.4649,"M":78.44899000000001},{"J":17.46514,"M":78.44898},{"J":17.46517,"M":78.44898},{"J":17.465230000000002,"M":78.44898},{"J":17.46527,"M":78.44898},{"J":17.465320000000002,"M":78.44898},{"J":17.46536,"M":78.44899000000001},{"J":17.46547,"M":78.44901}],"instructions":"Continue straight onto <b>Balkampet Rd/Fathe Nagar Main Rd</b><div style=\"font-size:0.9em\">Continue to follow Fathe Nagar Main Rd</div><div style=\"font-size:0.9em\">Pass by ICICI ATM (on the right in 1.6&nbsp;km)</div>","start_point":{"J":17.4511898,"M":78.45024869999997},"end_point":{"J":17.4654669,"M":78.44901000000004}},{"distance":{"text":"1.4 km","value":1377},"duration":{"text":"4 mins","value":247},"end_location":{"J":17.4702559,"M":78.43706689999999},
                    "maneuver":"turn-left","polyline":{"points":"efriBiay}MOd@g@tA_@fAg@lAIVw@xB[t@Yv@[z@ITIR}A|DoAfDUt@Y`AYhAER[nAc@bBAFe@fBm@jC[rAOj@]rAm@lCUz@Sz@YbAUbAWdAWfA"},"start_location":{"J":17.4654669,"M":78.44901000000004},"travel_mode":"DRIVING","encoded_lat_lngs":"efriBiay}MOd@g@tA_@fAg@lAIVw@xB[t@Yv@[z@ITIR}A|DoAfDUt@Y`AYhAER[nAc@bBAFe@fBm@jC[rAOj@]rAm@lCUz@Sz@YbAUbAWdAWfA","path":[{"J":17.46547,"M":78.44901},{"J":17.46555,"M":78.44882000000001},{"J":17.46575,"M":78.44839},{"J":17.46591,"M":78.44803},{"J":17.46611,"M":78.44764},{"J":17.466160000000002,"M":78.44752000000001},{"J":17.466440000000002,"M":78.44691},{"J":17.46658,"M":78.44664},{"J":17.466710000000003,"M":78.44636000000001},{"J":17.46685,"M":78.44606},{"J":17.466900000000003,"M":78.44595000000001},{"J":17.46695,"M":78.44585000000001},{"J":17.46742,"M":78.4449},{"J":17.46782,"M":78.44406000000001},{"J":17.467930000000003,"M":78.44379},{"J":17.46806,"M":78.44346},{"J":17.46819,"M":78.44309000000001},{"J":17.468220000000002,"M":78.44299000000001},{"J":17.46836,"M":78.44259000000001},{"J":17.46854,"M":78.44209000000001},{"J":17.46855,"M":78.44205000000001},{"J":17.46874,"M":78.44153},{"J":17.468970000000002,"M":78.44083},{"J":17.46911,"M":78.44041},{"J":17.46919,"M":78.44019},{"J":17.469340000000003,"M":78.43977000000001},{"J":17.46957,"M":78.43906000000001},{"J":17.46968,"M":78.43876},{"J":17.46978,"M":78.43846},{"J":17.469910000000002,"M":78.43812000000001},{"J":17.47002,"M":78.43778},{"J":17.47014,"M":78.43743},{"J":17.47026,"M":78.43707}],"lat_lngs":[{"J":17.46547,"M":78.44901},{"J":17.46555,"M":78.44882000000001},{"J":17.46575,"M":78.44839},{"J":17.46591,"M":78.44803},{"J":17.46611,"M":78.44764},{"J":17.466160000000002,"M":78.44752000000001},{"J":17.466440000000002,"M":78.44691},{"J":17.46658,"M":78.44664},{"J":17.466710000000003,"M":78.44636000000001},{"J":17.46685,"M":78.44606},{"J":17.466900000000003,"M":78.44595000000001},{"J":17.46695,"M":78.44585000000001},{"J":17.46742,"M":78.4449},{"J":17.46782,"M":78.44406000000001},{"J":17.467930000000003,"M":78.44379},{"J":17.46806,"M":78.44346},{"J":17.46819,"M":78.44309000000001},{"J":17.468220000000002,"M":78.44299000000001},{"J":17.46836,"M":78.44259000000001},{"J":17.46854,"M":78.44209000000001},{"J":17.46855,"M":78.44205000000001},{"J":17.46874,"M":78.44153},{"J":17.468970000000002,"M":78.44083},{"J":17.46911,"M":78.44041},{"J":17.46919,"M":78.44019},{"J":17.469340000000003,"M":78.43977000000001},{"J":17.46957,"M":78.43906000000001},{"J":17.46968,"M":78.43876},{"J":17.46978,"M":78.43846},{"J":17.469910000000002,"M":78.43812000000001},{"J":17.47002,"M":78.43778},{"J":17.47014,"M":78.43743},{"J":17.47026,"M":78.43707}],"instructions":"Turn <b>left</b> at <b>Fathe Nagar Jct</b> onto <b>Balnagar Main Rd</b><div style=\"font-size:0.9em\">Pass by Kid-Care Children's Hospital (on the left in 500&nbsp;m)</div>","start_point":{"J":17.4654669,"M":78.44901000000004},"end_point":{"J":17.4702559,"M":78.43706689999999}},{"distance":{"text":"0.1 km","value":112},"duration":{"text":"2 mins","value":96},"end_location":{"J":17.471199,"M":78.43743870000003},"maneuver":"turn-right","polyline":{"points":"cdsiBuvv}MKCoDeA"},"start_location":{"J":17.4702559,"M":78.43706689999999},"travel_mode":"DRIVING","encoded_lat_lngs":"cdsiBuvv}MKCoDeA","path":[{"J":17.47026,"M":78.43707},{"J":17.47032,"M":78.43709000000001},{"J":17.471200000000003,"M":78.43744000000001}],"lat_lngs":[{"J":17.47026,"M":78.43707},{"J":17.47032,"M":78.43709000000001},{"J":17.471200000000003,"M":78.43744000000001}],"instructions":"Turn <b>right</b>","start_point":{"J":17.4702559,"M":78.43706689999999},"end_point":{"J":17.471199,"M":78.43743870000003}},{"distance":{"text":"0.1 km","value":117},"duration":{"text":"1 min","value":32},"end_location":{"J":17.4714926,"M":78.43637969999997},"maneuver":"turn-left","polyline":{"points":"_jsiB_yv}M[bBGZUrA"},"start_location":{"J":17.471199,"M":78.43743870000003},"travel_mode":"DRIVING","encoded_lat_lngs":"_jsiB_yv}M[bBGZUrA","path":[{"J":17.471200000000003,"M":78.43744000000001},{"J":17.47134,"M":78.43694},{"J":17.47138,"M":78.4368},{"J":17.471490000000003,"M":78.43638}],"lat_lngs":[{"J":17.471200000000003,"M":78.43744000000001},{"J":17.47134,"M":78.43694},{"J":17.47138,"M":78.4368},{"J":17.471490000000003,"M":78.43638}],"instructions":"Turn <b>left</b><div style=\"font-size:0.9em\">Restricted usage road</div>","start_point":{"J":17.471199,"M":78.43743870000003},"end_point":{"J":17.4714926,"M":78.43637969999997}},{"distance":{"text":"0.2 km","value":215},"duration":{"text":"1 min","value":55},"end_location":{"J":17.4733426,"M":78.43697210000005},"maneuver":"turn-right","polyline":{"points":"yksiBkrv}MGAeAUwBe@iBc@aAS"},"start_location":{"J":17.4714926,"M":78.43637969999997},"travel_mode":"DRIVING","encoded_lat_lngs":"yksiBkrv}MGAeAUwBe@iBc@aAS","path":[{"J":17.471490000000003,"M":78.43638},{"J":17.47153,"M":78.43639},{"J":17.471880000000002,"M":78.43650000000001},{"J":17.47248,"M":78.43669000000001},{"J":17.473010000000002,"M":78.43687000000001},{"J":17.47334,"M":78.43697}],"lat_lngs":[{"J":17.471490000000003,"M":78.43638},{"J":17.47153,"M":78.43639},{"J":17.471880000000002,"M":78.43650000000001},{"J":17.47248,"M":78.43669000000001},{"J":17.473010000000002,"M":78.43687000000001},{"J":17.47334,"M":78.43697}],"instructions":"Turn <b>right</b><div style=\"font-size:0.9em\">Restricted usage road</div>","start_point":{"J":17.4714926,"M":78.43637969999997},"end_point":{"J":17.4733426,"M":78.43697210000005}},{"distance":{"text":"0.2 km","value":156},"duration":{"text":"1 min","value":45},"end_location":{"J":17.4728573,"M":78.4383355},"maneuver":"turn-right","polyline":{"points":"kwsiBavv}MrAgGDEDC"},"start_location":{"J":17.4733426,"M":78.43697210000005},"travel_mode":"DRIVING","encoded_lat_lngs":"kwsiBavv}MrAgGDEDC","path":[{"J":17.47334,"M":78.43697},{"J":17.472920000000002,"M":78.43829000000001},{"J":17.472890000000003,"M":78.43832},{"J":17.47286,"M":78.43834000000001}],"lat_lngs":[{"J":17.47334,"M":78.43697},{"J":17.472920000000002,"M":78.43829000000001},{"J":17.472890000000003,"M":78.43832},{"J":17.47286,"M":78.43834000000001}],"instructions":"Turn <b>right</b>","start_point":{"J":17.4733426,"M":78.43697210000005},"end_point":{"J":17.4728573,"M":78.4383355}}],"via_waypoint":[],"via_waypoints":[]}],"overview_polyline":"adniBqy{}M~A`IX|@f@r@PVj@bAdCzDJNlDdFZRXF`AThG|@NBO^O\\WXq@h@WL_@J_ARa@PKNMp@m@nDUlBKzAKh@SZYTi@T_Cr@eC~@oF~AgAZ}Bx@{Cx@w@RoATw@H{@Bu@CaBMKBIFGn@M`Ag@xHuD}@cAOUCkDEs@CKE_DIiACc@Bq@Js@TsBv@c@Jw@Fs@E]G}@_@i@g@s@g@o@_@u@Qm@Cw@DuCd@mCp@K@IHiAX_Bj@w@Zw@ToDRuDLgBD}FPcBD_AFkARo@Nw@Fu@@e@AUCOd@gA|CeCtGiA|CmDdJo@vB_BpGcFxS{AhGWfAKCoDeA[bB]nBmAWaFiAaASrAgGJI","summary":"Balkampet Rd","warnings":[],"waypoint_order":[],"overview_path":[{"J":17.444650000000003,"M":78.46313},{"J":17.44417,"M":78.46152000000001},{"J":17.44404,"M":78.46121000000001},{"J":17.44384,"M":78.46095000000001},{"J":17.44375,"M":78.46083},{"J":17.443530000000003,"M":78.46049000000001},{"J":17.442860000000003,"M":78.45955000000001},{"J":17.442800000000002,"M":78.45947000000001},{"J":17.441930000000003,"M":78.45832},{"J":17.44179,"M":78.45822000000001},{"J":17.441660000000002,"M":78.45818000000001},{"J":17.44133,"M":78.45807},{"J":17.44,"M":78.45776000000001},{"J":17.43992,"M":78.45774},{"J":17.44,"M":78.45758000000001},{"J":17.440080000000002,"M":78.45743},{"J":17.4402,"M":78.4573},{"J":17.440450000000002,"M":78.45709000000001},{"J":17.44057,"M":78.45702},{"J":17.440730000000002,"M":78.45696000000001},{"J":17.44105,"M":78.45686},{"J":17.44122,"M":78.45677},{"J":17.441280000000003,"M":78.45669000000001},{"J":17.44135,"M":78.45644},{"J":17.441580000000002,"M":78.45556},{"J":17.44169,"M":78.45501},{"J":17.441750000000003,"M":78.45455000000001},{"J":17.44181,"M":78.45434},{"J":17.44191,"M":78.4542},{"J":17.442040000000002,"M":78.45409000000001},{"J":17.44225,"M":78.45398},{"J":17.442890000000002,"M":78.45372},{"J":17.44356,"M":78.4534},{"J":17.444760000000002,"M":78.45292},{"J":17.445120000000003,"M":78.45278},{"J":17.44575,"M":78.45249000000001},{"J":17.446530000000003,"M":78.4522},{"J":17.446810000000003,"M":78.4521},{"J":17.447210000000002,"M":78.45199000000001},{"J":17.447490000000002,"M":78.45194000000001},{"J":17.44779,"M":78.45192},{"J":17.44806,"M":78.45194000000001},{"J":17.44855,"M":78.45201},{"J":17.448610000000002,"M":78.45199000000001},{"J":17.44866,"M":78.45195000000001},{"J":17.448700000000002,"M":78.45171},{"J":17.44877,"M":78.45138},{"J":17.448970000000003,"M":78.44981},{"J":17.44988,"M":78.45012000000001},{"J":17.45022,"M":78.45020000000001},{"J":17.45033,"M":78.45022},{"J":17.45119,"M":78.45025000000001},{"J":17.45145,"M":78.45027},{"J":17.451510000000003,"M":78.45030000000001},{"J":17.45231,"M":78.45035},{"J":17.45268,"M":78.45037},{"J":17.45286,"M":78.45035},{"J":17.453110000000002,"M":78.45029000000001},{"J":17.453370000000003,"M":78.45018},{"J":17.453950000000003,"M":78.4499},{"J":17.454130000000003,"M":78.44984000000001},{"J":17.454410000000003,"M":78.44980000000001},{"J":17.45467,"M":78.44983},{"J":17.45482,"M":78.44987},{"J":17.45513,"M":78.45003000000001},{"J":17.455340000000003,"M":78.45023},{"J":17.4556,"M":78.45043000000001},{"J":17.455840000000002,"M":78.45059},{"J":17.456110000000002,"M":78.45068},{"J":17.45634,"M":78.45070000000001},{"J":17.45662,"M":78.45067},{"J":17.45737,"M":78.45048000000001},{"J":17.458080000000002,"M":78.45023},{"J":17.45814,"M":78.45022},{"J":17.458190000000002,"M":78.45017},{"J":17.458560000000002,"M":78.45004},{"J":17.45904,"M":78.44982},{"J":17.45932,"M":78.44968},{"J":17.459600000000002,"M":78.44957000000001},{"J":17.46048,"M":78.44947},{"J":17.46139,"M":78.44940000000001},{"J":17.461910000000003,"M":78.44937},{"J":17.46318,"M":78.44928},{"J":17.46368,"M":78.44925},{"J":17.464000000000002,"M":78.44921000000001},{"J":17.464380000000002,"M":78.44911},{"J":17.46462,"M":78.44903000000001},{"J":17.4649,"M":78.44899000000001},{"J":17.46517,"M":78.44898},{"J":17.46536,"M":78.44899000000001},{"J":17.46547,"M":78.44901},{"J":17.46555,"M":78.44882000000001},{"J":17.46591,"M":78.44803},{"J":17.46658,"M":78.44664},{"J":17.46695,"M":78.44585000000001},{"J":17.46782,"M":78.44406000000001},{"J":17.46806,"M":78.44346},{"J":17.46854,"M":78.44209000000001},{"J":17.46968,"M":78.43876},{"J":17.47014,"M":78.43743},{"J":17.47026,"M":78.43707},{"J":17.47032,"M":78.43709000000001},{"J":17.471200000000003,"M":78.43744000000001},{"J":17.47134,"M":78.43694},{"J":17.471490000000003,"M":78.43638},{"J":17.471880000000002,"M":78.43650000000001},{"J":17.473010000000002,"M":78.43687000000001},{"J":17.47334,"M":78.43697},{"J":17.472920000000002,"M":78.43829000000001},{"J":17.47286,"M":78.43834000000001}]}]};

                    var res = {
                    	status:sinon.spy(),
                    	send: function(obj){tripid = obj.tripObj._id} //sinon.spy()
                    }

                    passengerController.saveSearchData(req,res);

                    setTimeout(function(){
                    	res.status.calledWith(200).should.equal(true,"TRIP information saved successfully");
                    	done();
                    },4000);
    });

	it('should say matches find successfully',function(done){

		var req = {

		};

		req.body = {
   	"startLocation":{"type":"Point","coordinates":[78.46109000000001,17.44433]},
   "endLocation":{"type":"Point","coordinates":[78.43966820000003,17.4733375]},
   "timeToLeave":"2015-09-18T10:15:18+00:00",
   "user_id":"2"
			};

			var res = {
				status:sinon.spy(),
				send:sinon.spy()
			}

			 passengerController.findMatchedTrips(req,res);

			setTimeout(function(){
				res.status.calledWith(200).should.equal(true,"MATCHE trips find successfully");
				done();
			},4001);
	});

	it('should say share mail sended successfully',function(done){

		var req = {

		};

		req.body = {
			"trip_id":tripid,
	"user_id":"2"
		}

		var res = {
			status:sinon.spy(),
			send: function(obj){console.log(obj);} // sinon.spy()
		}

		 passengerController.sendShareMessage(req,res);

		 setTimeout(function(){
		 	res.status.calledWith(200).should.equal(true,"SHAREING trip info successfully");
		 	done();
		 },8000);
	});

	it('should say contact mail send successfully',function(done){

		var req = {

		};

		req.body = {
			"user_id":"2",
"trip_id":tripid
		}
	

	 var res = {
	 	status: sinon.spy(),
	 	send:sinon.spy()
	 }

	 passengerController.contactPassenger(req,res);

	 setTimeout(function(){
	 	 res.status.calledWith(200).should.equal(true,"CONTACT mail and message send successfully");
	 	 done();
	 },8000);

	 });

	it('should say matching result finded successfully',function(done){

		var req = {

		};

		req.body = {
			"from":"1-10-74, Begumpet Rd, Old Patigadda, Chikoti Gardens, Begumpet, Hyderabad, Telangana 500016, India",
  "to":"Kukatpally Industrial Estate, Balanagar, Hyderabad, Telangana, India",
  "start_time":"5:30 PM",
  "start_date":"20 January, 2016",
  "user_id":"1"
		}

		var res = {
			status : sinon.spy(),
			send:sinon.spy()
		}

		passengerController.searchData(req,res);

		setTimeout(function(){
			res.status.calledWith(200).should.equal(true,"SEARCED information for matching results");
			done();
		},8000);
	});

	it('should say matching result finded successfully',function(done){

		var req = {

		};

		req.body = {
			"from":"1-10-74, Begumpet Rd, Old Patigadda, Chikoti Gardens, Begumpet, Hyderabad, Telangana 500016, India",
  "to":"Kukatpally Industrial Estate, Balanagar, Hyderabad, Telangana, India",
  "start_time":"5:30 PM",
  "start_date":"20 January, 2016",
  "user_id":"2"
		}

		var res = {
			status : sinon.spy(),
			send:sinon.spy()
		}

		passengerController.searchData(req,res);

		setTimeout(function(){
			res.status.calledWith(200).should.equal(true,"SEARCED information for matching results");
			done();
		},8000);
	});

});


after(function(done){

	
     for(var i in mongoose.connection.collections){
		mongoose.connection.collections[i].remove(function(){});
	}
     

	/*
	mongoose.connection.close(function(){
		 done();
	});
*/
done();

});